<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp"
    tools:context=".MainActivity">

    <EditText
        android:id="@+id/editTextEspIp"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="Service Info (Auto-Discovering...)"
        android:inputType="textNoSuggestions"
        android:enabled="false"
        android:focusable="false"
        android:background="@android:color/transparent"
        android:paddingTop="8dp"
        android:paddingBottom="8dp"
        android:textSize="16sp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <RadioGroup
        android:id="@+id/radioGroupMonitorMode"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="8dp"
        app:layout_constraintTop_toBottomOf="@id/editTextEspIp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <RadioButton
            android:id="@+id/radioButtonOta"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Monitor OTA" />

        <RadioButton
            android:id="@+id/radioButtonMainApp"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:checked="true"
            android:text="Monitor Main App (WS)" />
    </RadioGroup>

    <LinearLayout
        android:id="@+id/layoutDiscoveryControls"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="8dp"
        app:layout_constraintTop_toBottomOf="@id/radioGroupMonitorMode"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <!-- This button's ID is referenced as buttonStartStopDiscovery in MainActivity.java
             but findViewById uses R.id.buttonStartService.
             Ensure consistency or update findViewById. For now, assuming buttonStartService. -->
        <Button
            android:id="@+id/buttonStartService"
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Start Discovery"
            android:layout_marginEnd="4dp"/>

         <!-- You might not need a separate stop button if buttonStartService toggles text/function,
              but your MainActivity implies a single button buttonStartStopDiscovery.
              The original XML had buttonStopService. If you keep two distinct buttons,
              MainActivity needs to handle them separately.
              The current MainActivity uses ONE button (buttonStartStopDiscovery)
              which is assigned R.id.buttonStartService.
              Let's remove the second button here to match that. -->
    </LinearLayout>

    <!-- This button's ID is referenced as buttonAction in MainActivity.java
         but findViewById uses R.id.buttonConnect.
         Ensure consistency or update findViewById. For now, assuming buttonConnect. -->
    <Button
        android:id="@+id/buttonConnect"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:text="Action"
        app:layout_constraintTop_toBottomOf="@id/layoutDiscoveryControls"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>


    <Button
        android:id="@+id/buttonSaveLog"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Save Log"
        android:layout_marginTop="8dp"
        app:layout_constraintTop_toBottomOf="@id/buttonConnect"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <TextView
        android:id="@+id/textViewStatus"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Status: Idle"
        android:layout_marginTop="16dp"
        android:textSize="18sp"
        android:textAppearance="?attr/textAppearanceBody1"
        app:layout_constraintTop_toBottomOf="@id/buttonSaveLog"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <TextView
        android:id="@+id/textViewLastMessage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Last Message: None"
        android:layout_marginTop="8dp"
        android:textAppearance="?attr/textAppearanceBody2"
        app:layout_constraintTop_toBottomOf="@id/textViewStatus"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

</androidx.constraintlayout.widget.ConstraintLayout>